<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIONYX Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="https://use.typekit.net/rxm7ono.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="userdetails.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="Dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<style>
    * {
        font-family: proxima-nova, sans-serif !important;
        font-style: normal;
    }
</style>

<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Sidebar Content -->
            <div class="logosionyx">
                <div class="sionyxLogoIcon"></div>
            </div>
            <br>
            <div class="redirect-container">
                <!-- Dashboard Link -->
                <a id="dashboard-link" href="Dashboard.html"
                    style="margin-bottom: 15px; color: rgb(12, 12, 12); background-color: white; text-decoration: none">
                    <div style="display: inline-block;text-overflow:ellipsis"
                        onmouseout="document.getElementById('dashboard-link').style.color='black'">
                        <i class="fas fa-tachometer-alt icon" style="color: #333;"></i>Dashboard
                    </div>
                </a>
                <!-- Users Link -->
                <a href="UserDetails.html"><i class="fas fa-user-plus icon"
                        style="color: rgb(148, 148, 148)"></i>Users</a>
                <!-- Add User Link -->
                <a href="#" onclick="myFunction()"><i class="fas fa-user-plus icon"
                        style="color: rgb(148, 148, 148)"></i>Add User</a>
                <div id="snackbar">Still in implementation!</div>
                <div id="snackbar1"></div>
            </div>
            <!-- Footer -->
            <div class="footer">
                <!-- Profile Section -->
                <div class="profile footerUserDetails">
                    <div class="userIcon">
                        <img src="profile_pic.png" id="userIcon" alt="Administrator">
                    </div>
                    <div class="userDetails">
                        <!-- Profile Username -->
                        <div id="profile-username"> </div>
                        <div id="admintext">Administrator</div>
                    </div>
                    <!-- Logout Button -->
                    <div class="logoutContainer">
                        <i class="fas fa-sign-out-alt icon" id="logoutadmin" onclick="openModal()"
                            style="font-size: 20px"></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- Off-canvas Sidebar -->
        <div id="sidebarOffCanvas" style="display: none;" class="offCanvasMenu">
            <!-- Off-canvas Sidebar Content -->
            <div class="canvasHeader">
                <!-- Logo Container -->
                <div class="logoContainer">
                    <div class="sionyxLogoIcon"></div>
                </div>
                <!-- Close Button Container -->
                <div class="closetnContainer">
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                </div>
            </div>
            <!-- Redirect Container -->
            <div class="redirect-container">
                <!-- Dashboard Link -->
                <a href="https://sionyxadminpanel.s3.us-east-2.amazonaws.com/Adminpanel/UserDetails.html"
                    id="dashboard-link"
                    style="margin-bottom: 15px; color: rgb(12, 12, 12); background-color: white; text-decoration: none">
                    <div style="display: inline-block;text-overflow:ellipsis"
                        onmouseout="document.getElementById('dashboard-link').style.color='black'">
                        <i class="fas fa-tachometer-alt icon" style="color: #333;"></i>Dashboard
                    </div>
                </a>
                <!-- Add User Link -->
                <a href="#" onclick="myFunction()"><i class="fas fa-user-plus icon"
                        style="color: rgb(148, 148, 148)"></i>Add User</a>
                <div id="snackbarMob">Still in implementation!</div>
                <div id="snackbar1"></div>
            </div>
            <!-- Footer -->
            <div class="footer">
                <!-- Profile Section -->
                <div class="profile footerUserDetails">
                    <div class="userIcon">
                        <img src="profile_pic.png" id="userIcon" alt="Administrator">
                    </div>
                    <div class="userDetails">
                        <!-- Profile Username -->
                        <div id="profile-usernames"> </div>
                        <div id="admintext">Administrator</div>
                    </div>
                    <!-- Logout Button -->
                    <div class="logoutContainer">
                        <i class="fas fa-sign-out-alt icon" id="logoutadmin" onclick="openModal()"
                            style="font-size: 20px"></i>
                    </div>
                </div>
            </div>

        </div>

        <div class="dashboardContent">
            <div class="headingConatainer">
                <span id="BurgerIcon" style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>
                <h2 class="topHeader">Dashboard</h2>
            </div>
            <div style="font-weight: 600;font-size: 1.1rem;color: #252525;padding-bottom: 15px;">Overview</div>

            <div class="cardsContainer">
                <div class="cardRows1">
                    <div class="cards totalUsersCard" id="totalUsersCard">
                        <div class="toatlUsers d-flex flex-column justify-content-between">
                            <div class="fw-bold">TotalUsers</div>
                            <div class="d-flex justify-content-between">
                                <div class="fw-bold fs-4 d-flex align-items-center">2565</div>
                                <div>
                                    <div class="d-flex justify-content-end">
                                        <img src="./Icons/icon-user.svg" alt="">
                                    </div>
                                    <div class="successContainer">
                                        <span>25%</span>
                                        <img src="./Icons/icon-uptrend-arrow.svg" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="usersByMobile">
                            <div class="d-flex justify-content-between p-2">
                                <div>Android Users</div>
                                <div class="fw-bold fs-5">
                                    <img src="./Icons/icon-uptrend.svg" alt="">
                                    458
                                </div>
                            </div>
                            <div class="d-flex justify-content-between p-2">
                                <div>iOS Users</div>
                                <div class="fw-bold fs-5">
                                    <img src="./Icons/icon-downtrend.svg" alt="">
                                    69
                                </div>
                            </div>
                            <div class="d-flex justify-content-between p-2">
                                <div>Other Users</div>
                                <div class="fw-bold fs-5">
                                    <img src="./Icons/icon-uptrend.svg" alt="">
                                    62
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="activeStatusCards" id="statusCard">
                        <div class="cards d-flex p-4 flex-column justify-content-between" >
                            <div class="fw-bold">Online Users</div>
                            <div class="d-flex justify-content-between">
                                <div class="fw-bold fs-4 d-flex align-items-center">231</div>
                                <div>
                                    <div class="d-flex justify-content-end">
                                        <img src="./Icons/icon-user.svg" alt="">
                                    </div>
                                    <div class="successContainer">
                                        Online
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cards d-flex p-4 flex-column justify-content-between">
                            <div class="fw-bold">Offline Users</div>
                            <div class="d-flex justify-content-between">
                                <div class="fw-bold fs-4 d-flex align-items-center">100</div>
                                <div>
                                    <div class="d-flex justify-content-end">
                                        <img src="./Icons/icon-user.svg" alt="">
                                    </div>
                                    <div class="errorContainer">
                                        Offline
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="cards d-flex flex-column justify-content-between">
                        <div style="font-weight: 600;font-size: 1.2rem;padding-top: 20px;padding-left: 20px;">Percentage
                            of Camera Users</div>
                        <div>
                            <div id="piechart"></div>

                        </div>
                        <div> </div>
                    </div>
                </div>
                <div class="cardRows2">
                    <div class="cards p-4" id="topUsedCameras">
                        <div class="fw-bold">Most Top Used Camera</div>
                        <div class="cameraList mt-3 overflow-y-auto" style="overflow-y: auto !important;">
                            <div class="d-flex justify-content-between  p-2">
                                <div class="d-flex gap-3">
                                    <div class="d-flex align-items-center bg-secondary-subtle p-2 rounded">
                                        <img src="./Icons/iconNightWave.svg" alt="">
                                    </div>
                                    <div>
                                        <div class="fw-bold">NightWave</div>
                                        <div class="text-secondary">USA</div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center text-primary">200 products</div>
                            </div>

                            <div class="d-flex justify-content-between  p-2">
                                <div class="d-flex gap-3">
                                    <div class="d-flex align-items-center bg-secondary-subtle p-2 rounded">
                                        <img src="./Icons/iconOpsin.png" alt="">
                                    </div>
                                    <div>
                                        <div class="fw-bold">Opsin</div>
                                        <div class="text-secondary">India</div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center text-primary">200 products</div>
                            </div>

                            <div class="d-flex justify-content-between  p-2">
                                <div class="d-flex gap-3">
                                    <div class="d-flex align-items-center bg-secondary-subtle p-2 rounded">
                                        <img src="./Icons/iconArora.svg" alt="">
                                    </div>
                                    <div>
                                        <div class="fw-bold">Arora</div>
                                        <div class="text-secondary">Canada</div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center text-primary">200 products</div>
                            </div>


                        </div>
                    </div>
                    <div class="cards p-4">
                        <div class="fw-bold">Top Locations Of Users</div>
                        <div class="d-flex justify-content-center">
                            <div id="regions_div" style="width: 500px; height: 250px;"></div>

                        </div>
                    </div>
                    <div class="cards p-4" id="deviceRatioCard">
                        <div class="fw-bold">Device Ratio</div>
                        <div class="devicesList mt-3">
                            <div class="p-2">
                                <div class="d-flex justify-content-between text-secondary">
                                    <div>
                                        Android
                                    </div>
                                    <div>
                                        80%
                                    </div>
                                </div>

                                <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="100"
                                    aria-valuemin="0" aria-valuemax="100" style="height: 12px;">
                                    <div class="progress-bar rounded-pill"
                                        style="width: 80%;background-color: #00568B;"></div>
                                </div>
                            </div>
                            <div class="p-2">
                                <div class="d-flex justify-content-between text-secondary">
                                    <div>
                                        iOS
                                    </div>
                                    <div>
                                        69%
                                    </div>
                                </div>

                                <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="100"
                                    aria-valuemin="0" aria-valuemax="100" style="height: 12px;">
                                    <div class="progress-bar rounded-pill"
                                        style="width: 69%;background-color: #00568B;"></div>
                                </div>
                            </div>
                            <div class="p-2">
                                <div class="d-flex justify-content-between text-secondary">
                                    <div>
                                        Others
                                    </div>
                                    <div>
                                        9
                                    </div>
                                </div>

                                <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="100"
                                    aria-valuemin="0" aria-valuemax="100" style="height: 12px;">
                                    <div class="progress-bar rounded-pill" style="width: 9%;background-color: #00568B;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>


        </div>

    </div>











    <div id="spinner" class="lds-ring" style="display: none;">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>




    <div id="Logout-modal">
        <div class="Logout-content">
            <p><b>Are you sure you want to logout?</b></p>
            <div class="button-container">
                <button class="logout-btn" id="logout-btn" style="top: 318px; left: 751px; width: 200px; height: 47px; background: #ac0000 0% 0% no-repeat padding-box; border-radius: 5px; opacity: 1;      margin-right: 20px;
                    color: white;" onmouseover="this.style.backgroundColor='#ff3333'"
                    onmouseout="this.style.backgroundColor='#D80000'"> <span id="logout-text">Logout</span>
                    <span id="logout-spinner" style="display: none;"><i class="fas fa-spinner fa-spin"></i></span>
                </button>


                <button class="logout-Cancel-btn" onclick="closeModal()"
                    style="top: 318px; left: 966px; width: 200px; height: 47px; background: #FFFFFF 0% 0% no-repeat padding-box; border: 1px solid #252525; border-radius: 5px; opacity: 1;"
                    onmouseover="this.style.backgroundColor='#999'"
                    onmouseout="this.style.backgroundColor='#FFFFFF'">Cancel</button>
            </div>
        </div>
    </div>





    </div>





</body>

</html>



<script>

    document.addEventListener('DOMContentLoaded', function () {

        if (!localStorage.getItem('sessionToken')) {
            window.location.href = "AdminLogin.html";
            // window.location.href = "https://sionyxadminpanel.s3.us-east-2.amazonaws.com/Adminpanel/AdminLogin.html";
        } else {
            fetchDataAndRender();

        }
    });

    function fetchDataAndRender() {
        const jsonUrl = './data.json'; // Path to the local JSON file

        fetch(jsonUrl)
            .then(response => response.json())
            .then(data => renderPage(data))
            .catch(error => console.error('Error fetching data:', error));
    }
    function renderPage(data) {
        console.log(data)
      //  const contentDiv = document.getElementById('content');

       // let htmlContent = '';

       // data.forEach(item => {
        //     let itemClass = item.highlight ? 'highlight' : '';
        //     htmlContent += `
        //     <div class="item ${itemClass}">
        //         <h2>${item.name}</h2>
        //         <p>Value: ${item.value}</p>
        //         ${item.highlight ? '<p>This item is highlighted!</p>' : ''}
        //     </div>
        // `;
        //});

        //contentDiv.innerHTML = htmlContent;
    }

    google.charts.load('current', {
        'packages': ['geochart'],
    });

    google.charts.setOnLoadCallback(drawRegionsMap);

    function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
            ['Country', 'No. of users'],
            ['Germany', { v: 400, f: '400' }],
            ['United States', { v: 400, f: '200' }],
            ['Brazil', { v: 400, f: '150' }],
            ['Australia', { v: 400, f: '280' }],
            ['France', { v: 400, f: '300' }],
            ['Russia', { v: 400, f: '500' }],
            ['India', { v: 400, f: '690' }]
        ]);

        var options = {
            legend: 'none',
            colorAxis: { colors: ["#00568B"] },
            datalessRegionColor: '#EBEBEB',
            //defaultColor: '#EBEBEB'
        };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
    }


    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

        var data = google.visualization.arrayToDataTable([
            ['Camera Name', 'No of cameras'],
            ['Opsin', 25],
            ['NightWave', 30],
            ['Arora', 15],

        ]);

        var options = {
            pieSliceBorderColor: "transparent",
            chartArea: {

                height: "95%",
                width: "95%"
            },
            legend: {
                alignment: "center",
                textStyle: {
                    fontSize: 16
                }
            },
            slices: {
                0: { color: '#00A9FF' },
                1: { color: '#FAAF00' },
                2: { color: '#86A789' }
            }
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
    }

    function openNav() {
        document.getElementById("sidebarOffCanvas").style.display = "flex";
        // document.getElementById("BurgerIcon").style.display = "block";
    }

    function closeNav() {
        document.getElementById("sidebarOffCanvas").style.display = "none";
        // document.getElementById("BurgerIcon").style.display = "block";
    }


    window.addEventListener('popstate', function (event) {
        if (!localStorage.getItem('sessionToken')) {
            window.location.href = "AdminLogin.html";
            //window.location.href = "https://sionyxadminpanel.s3.us-east-2.amazonaws.com/Adminpanel/AdminLogin.html";
        }
    });
    const SESSION_TIMEOUT = 15 * 60 * 10000; // 15 minutes

    let sessionTimer;

    function resetSessionTimer() {
        clearTimeout(sessionTimer);
        sessionTimer = setTimeout(logoutUser, SESSION_TIMEOUT);
    }

    function logoutUser() {
        // Perform logout actions here, such as redirecting to the logout page
        localStorage.removeItem('sessionToken');
        //window.location.href = "https://sionyxadminpanel.s3.us-east-2.amazonaws.com/Adminpanel/AdminLogin.html";
        window.location.href = "AdminLogin.html";

    }
    const logoutIcon = document.getElementById('logoutadmin');
    if (logoutIcon) {
        logoutIcon.addEventListener('click', () => {
            const confirmationModal = document.getElementById('confirm-modal');
            if (confirmationModal) {
                confirmationModal.style.display = 'flex';
            } else {
                console.error('Confirmation modal not found.');
            }
        });
    } else {
        console.error('Logout icon not found.');
    }




    const logoutNoButton = document.getElementById('logoutadmin');
    if (logoutNoButton) {
        logoutNoButton.addEventListener('click', () => {
            const confirmationModal = document.getElementById('Logout-modal');
            if (confirmationModal) {
                confirmationModal.style.display = 'none';
            } else {
                console.error('Confirmation modal not found.');
            }
        });
    } else {
        console.error('Logout No button not found.');
    }
    // Function to close the confirmation modal



    function openModal() {
        const confirmationModal = document.getElementById('Logout-modal');
        if (confirmationModal) {
            confirmationModal.style.display = 'flex';
            const logoutButton = document.getElementById('logout-btn');
            const cancelButton = document.querySelector('.logout-Cancel-btn');

            username = getNameFromURL();
            if (logoutButton) {
                logoutButton.addEventListener('click', () => {
                    cancelButton.classList.add('disabled')
                    LogoutSpinner()
                    logout(username);


                });
            }
            console.log("djksfbkjsdbf");
        } else {


            console.error('Confirmation modal not found.');

        }
    }
    function closeModal() {
        const confirmModal = document.getElementById('Logout-modal');
        if (confirmModal) {
            confirmModal.style.display = 'none';
        } else {
            console.error('Confirmation modal not found.');
        }
    }




    function myFunction() {
        var x = document.getElementById("snackbar");
        var y = document.getElementById("snackbarMob");

        y.className = "show";
        x.style.visibility = 'visible'
        y.style.visibility = 'visible'
        setTimeout(function () {
            x.style.visibility = 'hidden'
            y.style.visibility = 'hidden'

        }, 3000);
    }




    function showSpinnerAndRedirect() {
        const spinner = document.getElementById('spinner');
        spinner.style.display = 'block';



        // setTimeout(() => {

        //     window.location.href = "https://sionyxadminpanel.s3.us-east-2.amazonaws.com/Adminpanel/AdminLogin.html";
        // }, 45000);
    }


    window.onload = showSpinnerAndRedirect;












    function updateProfileWithName(name) {
        const profileSpan = document.getElementById('profile-username');
        const profileusernames = document.getElementById('profile-usernames')
        if (profileSpan) {
            profileusernames.textContent = name;
            profileSpan.textContent = name;
            localStorage.setItem('username', name);
        } else {
            console.error('Profile username span not found.');
        }
    }


    function getUsernameFromStorage() {
        return localStorage.getItem('username');
    }



    function getNameFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('username');
    }









    function logout(username) {

        const cancelButton = document.querySelector('.logout-Cancel-btn');

        fetch('https://p9p8zffjs0.execute-api.us-east-2.amazonaws.com/Sionyx/Signout-admin', {
            method: 'POST',
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username })
        })
            .then(() => {
                cancelButton.classList.remove('disabled')
                localStorage.removeItem('sessionToken');
                localStorage.removeItem('username');
                window.location.href = "AdminLogin.html";
            })
            .catch(error => {
                console.error('There was a problem with the fetch operation:', error);
            });
    }

    updateProfileWithName(nameFromURL || storedUsername || '');
    function updateURL(page) {
        const url = new URL(window.location.href);
        url.searchParams.set('page', page);
        window.history.pushState({ path: url.href }, '', url.href);
    }

    function getCurrentPageNumber() {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page');
        console.log("page number returned from getCurrentPageNumber(): ", page)
        return page ? parseInt(page) : 1; // Default to page 1 if no page parameter is found
    }


    function redirectToCameraDetailsPage(details, page) {
        const queryParams = new URLSearchParams(details);
        const name = getUsernameFromStorage() || getNameFromURL();
        queryParams.append('name', name);
        queryParams.append('page', page);
        window.location.href = `UserDetails.html?${queryParams.toString()}`;
    }

    window.onload = fetchAndPopulateUserList;
    function updateURL(page) {
        const url = new URL(window.location.href);
        url.searchParams.set('page', page);
        window.history.pushState({ path: url.href }, '', url.href);
    }
    document.addEventListener('DOMContentLoaded', function () {
        const usernameFromURL = getNameFromURL();
        if (usernameFromURL) {
            updateProfileWithName(usernameFromURL);
        }

        if (!localStorage.getItem('sessionToken')) {
            window.location.href = "AdminLogin.html";
        } else {
            fetchAndPopulateUserList();
        }
    });





    function getCurrentPageNumber() {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page');
        return page ? parseInt(page) : 1;
    }
    function getNameFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('username');
    }



    function updateProfileWithName(name) {
        const profileSpan = document.getElementById('profile-username');
        const profileusernames = document.getElementById('profile-usernames')
        if (profileSpan) {
            profileusernames.textContent = name;
            profileSpan.textContent = name;
            localStorage.setItem('username', name);
        } else {
            console.error('Profile username span not found.');
        }
    }


    function getUsernameFromStorage() {
        return localStorage.getItem('username');
    }

    const nameFromURL = getNameFromURL();
    const storedUsername = getUsernameFromStorage();
    if (storedUsername) {
        updateProfileWithName(storedUsername);
    }


    function logout(username) {

        const cancelButton = document.querySelector('.logout-Cancel-btn');

        fetch('https://p9p8zffjs0.execute-api.us-east-2.amazonaws.com/Sionyx/Signout-admin', {
            method: 'POST',
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username })
        })
            .then(() => {
                cancelButton.classList.remove('disabled')
                localStorage.removeItem('sessionToken');
                localStorage.removeItem('username');
                window.location.href = "AdminLogin.html";
            })
            .catch(error => {
                console.error('There was a problem with the fetch operation:', error);
            });
    }

    updateProfileWithName(nameFromURL || storedUsername || '');
    function updateURL(page) {
        const url = new URL(window.location.href);
        url.searchParams.set('page', page);
        window.history.pushState({ path: url.href }, '', url.href);
    }

    function getCurrentPageNumber() {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page');
        console.log("page number returned from getCurrentPageNumber(): ", page)
        return page ? parseInt(page) : 1; // Default to page 1 if no page parameter is found
    }


    function redirectToCameraDetailsPage(details, page) {
        const queryParams = new URLSearchParams(details);
        const name = getUsernameFromStorage() || getNameFromURL();
        queryParams.append('name', name);
        queryParams.append('page', page);
        window.location.href = `UserDetails.html?${queryParams.toString()}`;
    }

    window.onload = fetchAndPopulateUserList;
    function updateURL(page) {
        const url = new URL(window.location.href);
        url.searchParams.set('page', page);
        window.history.pushState({ path: url.href }, '', url.href);
    }





    function getCurrentPageNumber() {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page');
        return page ? parseInt(page) : 1;
    }













</script>